<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pendaftaran - Acara Natal</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- Google API Client -->
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="https://accounts.google.com/gsi/client"></script>
    
    <!-- QR Code Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <h2>üéÑ Acara Natal BPS Sumut</h2>
                </div>
                <ul class="nav-menu">
                    <li class="nav-item"><a href="index.html" class="nav-link">Beranda</a></li>
                    <li class="nav-item"><a href="pendaftaran.html" class="nav-link active">Pendaftaran</a></li>
                    <li class="nav-item"><a href="akomodasi.html" class="nav-link">Akomodasi</a></li>
                    <li class="nav-item"><a href="dokumentasi.html" class="nav-link">Dokumentasi</a></li>
                </ul>
                <div class="hamburger">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>
    </header>

    <main class="main-content">
        <section class="registration-section">
            <div class="container">
                <div class="registration-header">
                    <h1>Form Pendaftaran Acara Natal</h1>
                    <p>Silakan isi form berikut untuk mendaftar ke acara natal. Data Anda akan diverifikasi dengan database yang ada.</p>
                </div>
                
                <div class="debug-info" style="display: none; background: #f8f9fa; padding: 10px; border-radius: 5px; margin-bottom: 20px;">
                    <strong>Debug Info:</strong> <span id="debug-text"></span>
                </div>
                
                <div class="form-container">
                    <form id="registration-form">
                        <div class="search-section">
                            <div class="form-group">
                                <label for="nama-search">Cari Nama Anda:</label>
                                <div style="position: relative;">
                                    <input type="text" id="nama-search" placeholder="Ketik nama untuk mencari...">
                                    <div id="search-results" class="search-results"></div>
                                </div>
                                <small class="form-help">Ketik minimal 2 karakter untuk memulai pencarian</small>
                            </div>
                            <button type="button" id="manual-entry-btn" class="btn-manual">
                                üìù Isi Data Manual (Nama belum terdaftar)
                            </button>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="nama">Nama Lengkap:</label>
                                <input type="text" id="nama" name="nama" required readonly>
                            </div>
                            
                            <div class="form-group">
                                <label for="satker">Satker Asal:</label>
                                <select id="satker" name="satker" required>
                                    <option value="">Pilih Satker Asal</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="status">Status:</label>
                                <select id="status" name="status" required>
                                    <option value="">Pilih Status</option>
                                    <option value="PNS">PNS</option>
                                    <option value="CPNS">CPNS</option>
                                    <option value="Tugas belajar">Tugas belajar</option>
                                    <option value="Lainnya">Lainnya</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="agama">Agama:</label>
                                <select id="agama" name="agama" required>
                                    <option value="">Pilih Agama</option>
                                    <option value="Kristen Protestan">Kristen Protestan</option>
                                    <option value="Katolik">Katolik</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="grade">Grade:</label>
                                <select id="grade" name="grade" required>
                                    <option value="">Pilih Grade</option>
                                <!-- Options akan diisi oleh JavaScript -->
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="jenis_kelamin">Jenis Kelamin:</label>
                                <select id="jenis_kelamin" name="jenis_kelamin" required>
                                    <option value="">Pilih Jenis Kelamin</option>
                                    <option value="Laki-laki">Laki-laki</option>
                                    <option value="Perempuan">Perempuan</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="jabatan">Jabatan:</label>
                                <select id="jabatan" name="jabatan" required>
                                    <option value="">Pilih Jabatan</option>
                                    <!-- Options akan diisi oleh JavaScript -->
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="pangkat">Pangkat/Golongan:</label>
                                <select id="pangkat" name="pangkat" required>
                                    <option value="">Pilih Pangkat/Golongan</option>
                                    <!-- Options akan diisi oleh JavaScript -->
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="whatsapp">Nomor WhatsApp:</label>
                                <input type="tel" id="whatsapp" name="whatsapp" required placeholder="Contoh: 081234567890">
                                <small class="form-help">Pastikan nomor aktif untuk menerima QR Code</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="konfirmasi_kehadiran">Konfirmasi Kehadiran:</label>
                                <select id="konfirmasi_kehadiran" name="konfirmasi_kehadiran" required>
                                    <option value="">Konfirmasi Kehadiran</option>
                                    <option value="Hadir">Hadir</option>
                                    <option value="Tidak Hadir">Tidak Hadir</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="jumlah_tamu">Jumlah Tamu:</label>
                                <input type="number" id="jumlah_tamu" name="jumlah_tamu" min="0" max="10" value="0" required>
                                <small class="form-help">Termasuk diri sendiri</small>
                            </div>
                            
                            <div class="form-group full-width">
                                <label for="data_tamu">Data Tamu (nama tamu):</label>
                                <textarea id="data_tamu" name="data_tamu" placeholder="Tulis nama tamu yang akan dibawa, dipisahkan dengan koma. Contoh: Budi Santoso, Siti Rahayu"></textarea>
                                <small class="form-help">Kosongkan jika tidak membawa tamu</small>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="submit-btn">
                                <span class="btn-text">Daftar & Dapatkan QR Code</span>
                                <span class="btn-loading" style="display: none;">
                                    <span class="loading-spinner"></span> Menyimpan...
                                </span>
                            </button>
                        </div>
                    </form>
                </div>
                
                <div id="qr-container" class="qr-container" style="display: none;">
                    <div class="qr-header">
                        <h3>QR Code Kehadiran Anda</h3>
                        <p>QR Code ini akan digunakan untuk check-in di acara. Simpan atau bagikan ke WhatsApp.</p>
                    </div>
                    <div class="qr-content">
                        <div id="qrcode" class="qrcode-image"></div>
                        <div class="qr-info">
                            <p><strong>Status:</strong> <span id="qr-status">Terverifikasi</span></p>
                            <p><strong>Tanggal Generate:</strong> <span id="qr-date"></span></p>
                            <p><strong>Nama:</strong> <span id="qr-nama"></span></p>
                        </div>
                    </div>
                    <div class="qr-actions">
                        <button id="download-qr" class="btn-download">
                            <span>üì• Download QR Code</span>
                        </button>
                        <button id="share-whatsapp" class="btn-whatsapp">
                            <span>üì± Share ke WhatsApp</span>
                        </button>
                        <button id="new-registration" class="btn-new">
                            <span>üîÑ Pendaftaran Baru</span>
                        </button>
                    </div>
                </div>

                <div id="status-message" class="status-message" style="display: none;"></div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 Panitia Acara Natal BPS Provinsi Sumatera Utara. All rights reserved.</p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>
